trigger:
  branches:
    include:
      - main

pr:
  branches:
    include:
      - main

variables:
  AWS_REGION: 'us-east-1'
  TF_VERSION: '1.4.0'
  TFLINT_VERSION: '0.46.1'
  TFSEC_VERSION: '1.28.1'

stages:
- stage: TerraformCI
  displayName: "Terraform CI/CD"
  jobs:
  - job: Terraform
    displayName: "Terraform Lint, Security Check, and Deploy"
    pool:
      vmImage: ubuntu-latest

    steps:
    - checkout: self

    - task: AzureCLI@2
      displayName: "Login via Azure CLI"
      inputs:
        azureSubscription: '<Your-Service-Connection-Name>'
        scriptType: bash
        scriptLocation: inlineScript
        inlineScript: echo "Logged in suc
